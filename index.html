<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>BeardedSpice by beardedspice</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">BeardedSpice</h1>
      <h2 class="project-tagline">Mac Media Keys for the Masses</h2>
      <a href="https://github.com/beardedspice/beardedspice" class="btn">View on GitHub</a>
      <a href="https://github.com/beardedspice/beardedspice/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/beardedspice/beardedspice/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="download" class="anchor" href="#download" aria-hidden="true"><span class="octicon octicon-link"></span></a>Download</h1>

<p>Download the <a href="http://www.calm-apps.com/s/BeardedSpice.zip">latest release</a>, or find previous released binaries <a href="https://github.com/beardedspice/beardedspice/tree/releases">here</a>.</p>

<p>Mac OS X 10.7 or greater required.</p>

<p><a href="https://travis-ci.org/beardedspice/beardedspice"><img src="https://travis-ci.org/beardedspice/beardedspice.png" alt="travis-ci"></a></p>

<h1>
<a id="about" class="anchor" href="#about" aria-hidden="true"><span class="octicon octicon-link"></span></a>About</h1>

<p><a href="images/bs.png"><img src="images/bs.png" alt="BeardedSpice"></a></p>

<p>BeardedSpice is a menubar application for Mac OSX that allows you to control web based media players with the media keys found on Mac keyboards. It is an extensible application that works with Chrome and Safari, and can control any tab with an applicable media player. BeardedSpice currently supports:</p>

<ul>
<li><a href="http://22tracks.com">22Tracks</a></li>
<li><a href="http://8tracks.com">8Tracks</a></li>
<li><a href="https://amazon.com/gp/dmusic/cloudplayer/player">Amazon Music</a></li>
<li><a href="http://www.audiomack.com/">AudioMack</a></li>
<li><a href="http://bandcamp.com">BandCamp</a></li>
<li><a href="http://listen.beatsmusic.com">BeatsMusic</a></li>
<li><a href="http://bop.fm">Bop.fm</a></li>
<li><a href="http://wiki.xbmc.org/index.php?title=Add-on:Chorus">Chorus</a></li>
<li><a href="http://deezer.com">Deezer</a></li>
<li><a href="https://www.focusatwill.com">focus@will</a></li>
<li><a href="https://play.google.com/music/">Google Music</a></li>
<li><a href="http://grooveshark.com">GrooveShark</a></li>
<li><a href="http://hypem.com">HypeMachine</a></li>
<li><a href="http://last.fm">Last.fm</a></li>
<li><a href="http://mixcloud.com">Mixcloud</a></li>
<li><a href="https://music.sonyentertainmentnetwork.com">Music Unlimited</a></li>
<li><a href="https://overcast.fm">Overcast.fm</a></li>
<li><a href="http://pandora.com">Pandora</a></li>
<li><a href="http://rdio.com">Rdio</a></li>
<li><a href="http://shuffler.fm/tracks">Shuffler.fm</a></li>
<li><a href="http://slacker.com">Slacker</a></li>
<li><a href="http://songza.com">Songza</a></li>
<li><a href="https://soundcloud.com">SoundCloud</a></li>
<li><a href="https://play.spotify.com">Spotify (Web)</a></li>
<li><a href="http://synology.com">Synology</a></li>
<li><a href="http://music.xbox.com">XboxMusic</a></li>
<li><a href="http://youtube.com">YouTube</a></li>
<li><a href="http://vk.com">VK ("My Music" from vk.com)</a></li>
<li><a href="http://vimeo.com">Vimeo</a></li>
<li><a href="http://listen.tidalhifi.com/">TIDAL</a></li>
</ul>

<p>If you want another supported app supported, simply open an issue with the tag 'app support'. Or, if you are feeling extra feisty, implement the handler yourself!</p>

<p>BeardedSpice is built with <a href="https://github.com/nevyn/SPMediaKeyTap">SPMediaKeyTap</a> and works well with other applications listening to media key events.</p>

<h2>
<a id="dependencies" class="anchor" href="#dependencies" aria-hidden="true"><span class="octicon octicon-link"></span></a>Dependencies</h2>

<p>We use <a href="http://cocoapods.org/">CocoaPods</a> to manage all obj-c/cocoa dependences. Install them locally using:</p>

<div class="highlight highlight-bash"><pre>sudo gem install cocoapods
pod setup
pod install</pre></div>

<p><em>Always</em> use BeardedSpice.xcworkspace for development, <em>not</em> BeardedSpice.xcodeproject</p>

<h2>
<a id="features" class="anchor" href="#features" aria-hidden="true"><span class="octicon octicon-link"></span></a>Features</h2>

<h3>
<a id="setting-an-active-tab" class="anchor" href="#setting-an-active-tab" aria-hidden="true"><span class="octicon octicon-link"></span></a>Setting an active tab</h3>

<p>Tell BeardedSpice to control a tab by either clicking the menubar icon and selecting a tab from the dropdown, or by pressing the 'Set Active Tab' shortcut when a browser window is active. The shortcut defaults to âŒ˜+F8, and is configurable in the preferences panel. Switching active tabs will pause the currently active tab (if there is one).</p>

<p>In Chrome you must reset your active tab if you move your tab to a new window. With Safari, reset your active tab when changing the order of your active tab or moving it to a new window.</p>

<h3>
<a id="disabling-certain-handlers" class="anchor" href="#disabling-certain-handlers" aria-hidden="true"><span class="octicon octicon-link"></span></a>Disabling certain handlers</h3>

<p>From the preferences menu, uncheck any types of webpages that you don't want BeardedSpice to have control over. By default, all implemented handlers are enabled.</p>

<h2>
<a id="writing-a-handler" class="anchor" href="#writing-a-handler" aria-hidden="true"><span class="octicon octicon-link"></span></a>Writing a Handler</h2>

<p>Media controllers are written as <a href="https://github.com/beardedspice/beardedspice/blob/master/BeardedSpice/MediaStrategy.h">strategies</a>. Each strategy defines a collection of Javascript functions to be excecuted on particular webpages.</p>

<div class="highlight highlight-Objective-C"><pre><span class="pl-k">@interface</span> <span class="pl-en">MediaStrategy</span> : <span class="pl-e">NSObject</span>

-(<span class="pl-k">BOOL</span>) <span class="pl-en">accepts</span><span class="pl-en">:</span>(<span class="pl-k">id</span> &lt;Tab&gt;) <span class="pl-smi">tab</span>;
-(<span class="pl-c1">NSString</span> *) <span class="pl-en">displayName</span>;

-(<span class="pl-c1">NSString</span> *) <span class="pl-en">toggle</span>;
-(<span class="pl-c1">NSString</span> *) <span class="pl-en">previous</span>;
-(<span class="pl-c1">NSString</span> *) <span class="pl-en">next</span>;
-(<span class="pl-c1">NSString</span> *) <span class="pl-en">pause</span>;

<span class="pl-k">@end</span></pre></div>

<p>The <code>accepts</code> method takes a <code>Tab</code> object and returns <code>YES</code> if the strategy can control the given tab. <code>displayName</code> must return a unique string describing the controller and will be used as the name shown in the Preferences panel. All other functions return a Javascript function for the particular action. <code>pause</code> is a special case and is used when changing the active tab.</p>

<p>A sample strategy for GrooveShark:</p>

<div class="highlight highlight-Objective-C"><pre><span class="pl-k">@implementation</span> <span class="pl-en">GrooveSharkStrategy</span>

-(<span class="pl-k">id</span>) <span class="pl-en">init</span>
{
    self = [<span class="pl-v">super</span> <span class="pl-c1">init</span>];
    <span class="pl-k">if</span> (self) {
        predicate = [<span class="pl-c1">NSPredicate</span> <span class="pl-c1">predicateWithFormat:</span><span class="pl-s"><span class="pl-pds">@"</span><span class="pl-c1">SELF</span> LIKE[c] '*grooveshark.com*'<span class="pl-pds">"</span></span>];
    }
    <span class="pl-k">return</span> self;
}

-(<span class="pl-k">BOOL</span>) <span class="pl-en">accepts</span><span class="pl-en">:</span>(<span class="pl-k">id</span> &lt;Tab&gt;)<span class="pl-smi">tab</span>
{
    <span class="pl-k">return</span> [predicate <span class="pl-c1">evaluateWithObject:</span>[tab <span class="pl-c1">URL</span>]];
}

-(<span class="pl-c1">NSString</span> *) <span class="pl-en">toggle</span>
{
    <span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">@"</span>(function(){return window.Grooveshark.togglePlayPause()})()<span class="pl-pds">"</span></span>;
}

-(<span class="pl-c1">NSString</span> *) <span class="pl-en">previous</span>
{
    <span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">@"</span>(function(){return window.Grooveshark.previous()})()<span class="pl-pds">"</span></span>;
}

-(<span class="pl-c1">NSString</span> *) <span class="pl-en">next</span>
{
    <span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">@"</span>(function(){return window.Grooveshark.next()})()<span class="pl-pds">"</span></span>;
}

-(<span class="pl-c1">NSString</span> *) <span class="pl-en">pause</span>
{
    <span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">@"</span>(function(){return window.Grooveshark.pause()})()<span class="pl-pds">"</span></span>;
}

-(<span class="pl-c1">NSString</span> *) <span class="pl-en">displayName</span>
{
    <span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">@"</span>Grooveshark<span class="pl-pds">"</span></span>;
}

<span class="pl-k">@end</span></pre></div>

<p>Update the <a href="https://github.com/beardedspice/beardedspice/blob/master/BeardedSpice/MediaStrategyRegistry.m"><code>MediaStrategyRegistry</code></a> to include an instance of your new strategy:</p>

<div class="highlight highlight-Objective-C"><pre>+(<span class="pl-c1">NSArray</span> *) getDefaultMediaStrategies
{
        DefaultMediaStrategies = [<span class="pl-c1">NSArray</span> <span class="pl-c1">arrayWithObjects:</span>
                                  <span class="pl-c">// ...</span>
                                  [[GoogleMusicStrategy <span class="pl-c1">alloc</span>] <span class="pl-c1">init</span>],
                                  [[RdioStrategy <span class="pl-c1">alloc</span>] <span class="pl-c1">init</span>],
                                  <span class="pl-c">// add your new strategy!</span>
                                  [[GrooveSharkStrategy <span class="pl-c1">alloc</span>] <span class="pl-c1">init</span>],
                                  <span class="pl-c1">nil</span>];
}</pre></div>

<p>Finally, update the <a href="https://github.com/beardedspice/beardedspice/blob/master/BeardedSpice/BeardedSpiceUserDefaults.plist">default preferences plist</a> to include your strategy.</p>

<h2>
<a id="contact" class="anchor" href="#contact" aria-hidden="true"><span class="octicon octicon-link"></span></a>Contact</h2>

<ul>
<li><a href="https://twitter.com/chedkid">@chedkid</a></li>
<li><a href="https://twitter.com/trhodeos">@trhodeos</a></li>
</ul>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/beardedspice/beardedspice">BeardedSpice</a> is maintained by <a href="https://github.com/beardedspice">beardedspice</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

            <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-47149001-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>

